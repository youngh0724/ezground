<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.ezground.team.service.ReservationMapper">
  
  	<select id="facilitySelectPage"
			parameterType="java.util.Map"
			resultType="com.ezground.teamproject.facility.dto.FacilityField">
		SELECT 
			a.field_no AS fieldNo
			,a.field_name AS fieldName
			,a.field_size AS fieldSize
			,a.field_people_number AS fieldPeopleNumber
			,b.facility_no AS facilityNo
			,b.facility_address AS facilityAddress
			,b.facility_price AS facilityPrice			
		FROM t_facility_field a INNER JOIN t_facility b
		ON a.facility_no = b.facility_no
		<if test="searchWord != null">
			WHERE team_name LIKE CONCAT('%',#{searchWord},'%')
		</if>
		ORDER BY field_no
		LIMIT #{startRow}, #{rowPerPage}		
	</select>
	
	<resultMap type="ksmart.project.test26.movie.dto.MovieAndMovieFile"
				id="MovieAndMovieFileMap">
		<id column="movie_id" property="movieId" />
		<result column="movie_name" property="movieName" />
			<collection property="list"			ofType="ksmart.project.test26.movie.dto.MovieFile">
				<id column="movie_file_id" property="movieFileId"/>
				<result column="file_name" property="fileName"/>
				<result column="file_ext" property="fileExt"/>
				<result column="file_size" property="fileSize"/>
			</collection>
		</resultMap>	
	
	<select id="facilitySelectCount"
  			resultType="int">
  		SELECT 
  			count(*) 
  		FROM t_facility_field
  	</select>
  
  </mapper>